<?xml version="1.0" encoding="UTF-8"?><beans xmlns="http://www.springframework.org/schema/beans"    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"    xmlns:context="http://www.springframework.org/schema/context"    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"    xsi:schemaLocation="http://www.springframework.org/schema/beans            http://www.springframework.org/schema/beans/spring-beans.xsd            http://www.springframework.org/schema/mvc            http://www.springframework.org/schema/mvc/spring-mvc.xsd            http://www.springframework.org/schema/context            http://www.springframework.org/schema/context/spring-context.xsd            http://www.springframework.org/schema/aop            http://www.springframework.org/schema/aop/spring-aop.xsd            http://www.springframework.org/schema/tx            http://www.springframework.org/schema/tx/spring-tx.xsd ">    <!--shiro的配置，关键两点，配置SecurityManager和依赖的RealM -->    <bean id="shiroFilter" class="org.apache.shiro.spring.web.ShiroFilterFactoryBean">        <property name="securityManager" ref="securityManager" />        <property name="loginUrl" value="/loginIndex" />        <property name="successUrl" value="/" />        <property name="unauthorizedUrl" value="/unauthorized" />        <property name="filters">            <map>                <entry key="anno" value-ref="anno" />                <entry key="authc" value-ref="authc" />            </map>        </property>        <property name="filterChainDefinitionMap">            <map>                <entry key="anon" value="anon" />                <entry key="authc" value="authc" />            </map>        </property>        <property name="filterChainDefinitions">            <value>                /common/**=anon                /login=anon                /service/**=anon                /logout=logout                /**=authc            </value>        </property>    </bean>    <bean id="authc"        class="org.apache.shiro.web.filter.authc.FormAuthenticationFilter">        <property name="usernameParam" value="uname"></property>        <property name="passwordParam" value="upass"></property>    </bean>    <bean id="logout" class="org.apache.shiro.web.filter.authc.LogoutFilter">        <property name="redirectUrl" value="/loginIndex" />    </bean>     <bean id="anno" class="org.apache.shiro.web.filter.authc.AnonymousFilter" />    <bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager">        <property name="realm" ref="loginRealm" />        <property name="sessionMode" value="http"></property>        <!-- cacheManager -->        <property name="cacheManager" ref="cacheManager" />        <!-- sessionManager -->        <property name="sessionManager" ref="sessionManager"></property>      </bean>    <!-- 登录校验器 -->    <bean id="loginRealm" class="com.centent.weixin.component.LoginRealm" />    <!-- session管理器 -->      <bean id="sessionManager"          class="org.apache.shiro.web.session.mgt.DefaultWebSessionManager">          <!-- 设置全局会话超时时间，默认30分钟(1800000) -->          <property name="globalSessionTimeout" value="1800000" />          <!-- 是否在会话过期后会调用SessionDAO的delete方法删除会话 默认true -->          <property name="deleteInvalidSessions" value="true" />          <!-- 会话验证器调度时间 -->          <property name="sessionValidationInterval" value="1800000" />          <!-- session存储的实现 -->          <property name="sessionDAO" ref="redisSessionDAO" />         <!-- sessionIdCookie的实现,用于重写覆盖容器默认的JSESSIONID -->          <property name="sessionIdCookie" ref="sharesession" />          <!-- 定时检查失效的session -->          <property name="sessionValidationSchedulerEnabled" value="true" />      </bean>         <!-- sessionIdCookie的实现,用于重写覆盖容器默认的JSESSIONID -->      <bean id="sharesession" class="org.apache.shiro.web.servlet.SimpleCookie">          <!-- cookie的name,对应的默认是 JSESSIONID -->          <constructor-arg name="name" value="SHAREJSESSIONID" />          <!-- jsessionId的path为 / 用于多个系统共享jsessionId -->          <property name="path" value="/" />          <property name="httpOnly" value="true"/>      </bean>              <!-- shiro redisManager -->    <bean id="redisManager" class="org.crazycake.shiro.RedisManager">        <property name="host" value="${mvn.redis.host}"/>        <property name="port" value="${mvn.redis.port}"/>        <property name="expire" value="${mvn.redis.expire}"/>        <!-- optional properties:        <property name="timeout" value="10000"/>        <property name="password" value="123456"/>        -->    </bean>    <!-- redisSessionDAO -->    <bean id="redisSessionDAO" class="org.crazycake.shiro.RedisSessionDAO">        <property name="redisManager" ref="redisManager" />    </bean>    <!-- cacheManager -->    <bean id="cacheManager" class="org.crazycake.shiro.RedisCacheManager">        <property name="redisManager" ref="redisManager" />    </bean>    </beans>